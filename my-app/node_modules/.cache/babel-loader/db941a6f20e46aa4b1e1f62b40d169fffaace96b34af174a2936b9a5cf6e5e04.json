{"ast":null,"code":"import axios from 'axios';\n\n// HELPER: Get token from localStorage\nconst getAuthToken = () => {\n  const token = localStorage.getItem('token');\n  if (token) return token;\n  const userStr = localStorage.getItem('user');\n  if (userStr) {\n    try {\n      const user = JSON.parse(userStr);\n      return user.token || '';\n    } catch (e) {\n      return '';\n    }\n  }\n  return '';\n};\nconst API = axios.create({\n  baseURL: 'http://localhost:5000/api'\n});\n\n// INTERCEPTOR: Add token to every request\nAPI.interceptors.request.use(config => {\n  const token = getAuthToken();\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// ==================== AUTH APIs ====================\nexport const login = data => API.post('/auth/login', data);\nexport const register = data => API.post('/auth/register', data);\nexport const getProfile = () => API.get('/auth/profile');\nexport const updateProfile = data => API.put('/auth/profile', data);\nexport const changePassword = data => API.put('/auth/change-password', data);\n\n// ==================== EVENT APIs ====================\nexport const getEvents = () => API.get('/events');\nexport const createEvent = data => API.post('/events', data);\nexport const getEventById = id => API.get(`/events/${id}`);\nexport const deleteEvent = id => API.delete(`/events/${id}`);\n\n// ==================== REGISTRATION APIs ====================\nexport const registerForEvent = eventId => API.post(`/registrations/${eventId}`);\nexport const getMyRegistrations = () => API.get('/registrations/my-registrations');\nexport const getAllRegistrations = () => API.get('/registrations/all');\nexport const getEventRegistrations = eventId => API.get(`/registrations/event/${eventId}`);\nexport const approveRegistration = id => API.put(`/registrations/${id}/approve`);\nexport const rejectRegistration = id => API.put(`/registrations/${id}/reject`);\n\n// ==================== IMAGE UPLOAD ====================\nexport const uploadProfileImage = formData => {\n  const token = getAuthToken();\n  return axios.post('http://localhost:5000/api/auth/upload-profile-image', formData, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n};\nexport default API;","map":{"version":3,"names":["axios","getAuthToken","token","localStorage","getItem","userStr","user","JSON","parse","e","API","create","baseURL","interceptors","request","use","config","headers","Authorization","login","data","post","register","getProfile","get","updateProfile","put","changePassword","getEvents","createEvent","getEventById","id","deleteEvent","delete","registerForEvent","eventId","getMyRegistrations","getAllRegistrations","getEventRegistrations","approveRegistration","rejectRegistration","uploadProfileImage","formData"],"sources":["D:/project/my-app/src/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// HELPER: Get token from localStorage\r\nconst getAuthToken = () => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) return token;\r\n\r\n  const userStr = localStorage.getItem('user');\r\n  if (userStr) {\r\n    try {\r\n      const user = JSON.parse(userStr);\r\n      return user.token || '';\r\n    } catch (e) {\r\n      return '';\r\n    }\r\n  }\r\n  return '';\r\n};\r\n\r\nconst API = axios.create({\r\n  baseURL: 'http://localhost:5000/api',\r\n});\r\n\r\n// INTERCEPTOR: Add token to every request\r\nAPI.interceptors.request.use((config) => {\r\n  const token = getAuthToken();\r\n  \r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  \r\n  return config;\r\n});\r\n\r\n// ==================== AUTH APIs ====================\r\nexport const login = (data) => API.post('/auth/login', data);\r\nexport const register = (data) => API.post('/auth/register', data);\r\nexport const getProfile = () => API.get('/auth/profile');\r\nexport const updateProfile = (data) => API.put('/auth/profile', data);\r\nexport const changePassword = (data) => API.put('/auth/change-password', data);\r\n\r\n// ==================== EVENT APIs ====================\r\nexport const getEvents = () => API.get('/events');\r\nexport const createEvent = (data) => API.post('/events', data);\r\nexport const getEventById = (id) => API.get(`/events/${id}`);\r\nexport const deleteEvent = (id) => API.delete(`/events/${id}`);\r\n\r\n// ==================== REGISTRATION APIs ====================\r\nexport const registerForEvent = (eventId) => API.post(`/registrations/${eventId}`);\r\nexport const getMyRegistrations = () => API.get('/registrations/my-registrations');\r\nexport const getAllRegistrations = () => API.get('/registrations/all');\r\nexport const getEventRegistrations = (eventId) => API.get(`/registrations/event/${eventId}`);\r\nexport const approveRegistration = (id) => API.put(`/registrations/${id}/approve`);\r\nexport const rejectRegistration = (id) => API.put(`/registrations/${id}/reject`);\r\n\r\n// ==================== IMAGE UPLOAD ====================\r\nexport const uploadProfileImage = (formData) => {\r\n  const token = getAuthToken();\r\n  return axios.post(\r\n    'http://localhost:5000/api/auth/upload-profile-image',\r\n    formData,\r\n    {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    }\r\n  );\r\n};\r\n\r\nexport default API;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}